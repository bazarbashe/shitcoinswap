.container
  %h1.mt-5 Buy/Sell #{ @order.base_asset.name }
  #balance
    %p Available #{ @order.base_asset.symbol }: {{ STATE.balances[base_asset_id] ? STATE.balances[base_asset_id].available : 0.0 }}
    %p Available #{ @order.quote_asset.symbol }: {{ STATE.balances[quote_asset_id] ? STATE.balances[quote_asset_id].available : 0.0 }}
  .card
    .card-body
      = render 'form', order: @order
  %h5.mt-3 Open orders
  .card
    .card-body
      %table.table
        %thead
          %tr
            %th Side
            %th Asset
            %th Market
            %th= t '.quantity'
            %th= t '.rate'
            %th= t '.filled'
            %th
        %tbody
          - @open_orders.each do |order|
            %tr
              %td= order.side
              %td= link_to order.base_asset.name, order.base_asset
              %td= order.quote_asset.name
              %td= order.quantity
              %td= order.market? ? 'any' : order.rate
              %td
                = order.percent_filled
                \%
              %td
                - if order.user == current_user
                  = link_to (t '.cancel'), order, method: 'delete'
:coffeescript
  new Vue
    el: '#balance'
    data: ->
      STATE: STATE
      base_asset_id: #{ @order.base_asset_id }
      quote_asset_id: #{ @order.quote_asset_id.to_i }